# [12.1. はじめに](https://docs.python.jp/3/tutorial/venv.html#introduction)

< [12. 仮想環境とパッケージ](https://docs.python.jp/3/tutorial/venv.html#virtual-environments-and-packages) < [Python チュートリアル](https://docs.python.jp/3/tutorial/index.html) < [ドキュメント](https://docs.python.jp/3/index.html)

## Pythonは手動による依存関係の解消が必須である

> Python アプリケーションはよく標準ライブラリ以外のパッケージやモジュールを利用します。またアプリケーションがあるバグ修正を必要としていたり、過去のバージョンのインターフェイスに依存しているために、ライブラリの特定のバージョンを必要とすることもあります。

Pythonに限らないと思うが、とくにPythonはその傾向が強いということか？

> そのため、1つのインストールされたPythonが全てのアプリケーションの要求に対応することは不可能です。もしアプリケーションAがあるモジュールのバージョン 1.0 を要求していて、別のアプリケーションBが同じモジュールのバージョン 2.0 を要求している場合、2つの要求は衝突していて、1.0 と 2.0 のどちらかのバージョンをインストールしても片方のアプリケーションが動きません。

Python 3.6.1では動くけど、Python 3.4.3では動かないとか？ライブラリどころか、言語レベルで互換性がないこともしばしばあるので頷ける。

> この問題の解決策は 仮想環境 を作ることです。仮想環境とは、特定のバージョンの Python と幾つかの追加パッケージを含んだ Python インストールを構成するディレクトリです。

> 別のアプリケーションはそれぞれ別の仮想環境を使うことができます。先の例にあった要求の衝突を解決する場合、アプリケーションAが固有の仮想環境を持ってそこにライブラリのバージョン 1.0 をインストールし、アプリケーションBが持つ別の仮想環境にライブラリのバージョン 2.0 をインストールすることができます。そしてアプリケーションBがライブラリのバージョンを 3.0 に更新することを要求する場合も、アプリケーションAに影響しません。

「別のアプリケーションはそれぞれ別の仮想環境を使うことができます。」ではなくて「アプリケーションごとに別々の仮想環境を作らないとバージョン誤差によりエラーとなって実行すらできない」というべき。

## まとめ

* Pythonはアプリケーションごとに依存ライブラリ用の仮想環境を作らねば動作しなくなる可能性が高まる
    * 依存ライブラリのバージョン差異によって、アプリAでは動作するがアプリBでは動作しないということが生じうるから

### 問題
    
以下のような問題が生じうる。

* ファイルサイズが肥大化しやすい
    * バージョン違いだけのほぼ同じものなのに、いくつも保存せねばならない
* 管理が不可能
    * アプリとそのバージョンに応じて、依存ライブラリのバージョンを管理する。それをディレクトリごとに分ける。手動で。
        * 人間に管理できるとは思えない
            * どこに何があるのか、どのバージョンがあるのか、どのライブラリがどのライブラリと依存しているのか、それらのバージョンの組合せは？
                * 膨大すぎて管理などできるはずもない
                * 楽したいからライブラリやアプリを使うのに、上記のような手動バージョン管理が必要なら本末転倒
        * 一定のリテラシーを求められる
            * 依存関係の調査
                * ログ解析
                    * ググる
                        * 時間と根気が必要
                * ソースコード解析
                    * コードが読めなければアプリを使えないという事態が生じる
                        * 勉強せずとも楽に使えるからこそ価値あるソフトウェアだと思う
                        * コードが読めねば使えないアプリだと利用者が限られてしまう
                            * 誰でもいつでも簡単に使えるようにしたい

「動作環境の構築がむずかしい」ことは「Javaのようなオブジェクト指向の機能が使えない」という欠点以上に致命的な弱点である。気軽に使えるスクリプト言語とは言いがたい。ライブラリの豊富さとトレードオフなので一概に悪いとは言えないが、新規参入を阻む高い敷居のひとつであることに変わりない。

Windowsみたくexeを叩けば実行できるような容易さが欲しいところ。

